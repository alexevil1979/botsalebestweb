# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ _DIR_ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è PHP –∫–æ–¥ –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∏–ª–∏ –æ—à–∏–±–∫–∞ —Å `_DIR_`.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ü–æ–ª–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ VPS:

```bash
# 1. –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /ssd/www/bots/botsalebestwebstudio

# 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Git
git config --global --add safe.directory /ssd/www/bots/botsalebestwebstudio

# 3. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑ GitHub
git fetch origin main

# 4. –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
git reset --hard origin/main

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞ admin/index.php
echo "–ü—Ä–æ–≤–µ—Ä–∫–∞ admin/index.php:"
grep -n "__DIR__" admin/index.php | head -3

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# 5:require_once __DIR__ . '/../vendor/autoload.php';
# 14:Config::load(__DIR__ . '/../.env');
# 38:include __DIR__ . '/includes/header.php';

# 6. –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ _DIR_ (–æ–¥–Ω–æ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ), –∏—Å–ø—Ä–∞–≤—å—Ç–µ –≤—Ä—É—á–Ω—É—é:
# sed -i 's/_DIR_/__DIR__/g' admin/*.php

# 7. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
composer install --no-dev --optimize-autoloader

# 8. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ Apache
sudo systemctl reload apache2

# 9. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω–∫–∏
curl -I https://botsale.1tlt.ru/admin/
```

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:

```bash
cd /ssd/www/bots/botsalebestwebstudio

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –Ω–∞ _DIR_ (–æ–¥–Ω–æ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ - –æ—à–∏–±–∫–∞)
grep -r "_DIR_" admin/ || echo "‚úÖ –û—à–∏–±–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ __DIR__ (–¥–≤–æ–π–Ω–æ–µ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ - –ø—Ä–∞–≤–∏–ª—å–Ω–æ)
grep -r "__DIR__" admin/ | head -5
```

### –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω—ã –æ—à–∏–±–∫–∏:

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
find admin/ -name "*.php" -exec sed -i 's/_DIR_/__DIR__/g' {} \;

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
grep -r "_DIR_" admin/ || echo "‚úÖ –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ"
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω–∫–∏ —á–µ—Ä–µ–∑ curl
curl -I https://botsale.1tlt.ru/admin/

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å HTTP 200 –∏–ª–∏ 302 (—Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ login)

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
# –û—Ç–∫—Ä–æ–π—Ç–µ: https://botsale.1tlt.ru/admin/
# –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞ –∏–ª–∏ –¥–∞—à–±–æ—Ä–¥
```

---

**‚úÖ –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!**
